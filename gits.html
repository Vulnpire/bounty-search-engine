<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Bounty Search Engine</title>
        <link rel="stylesheet" href="css/styles.css">
    </head>
<body>
    <div class="container">
        <h1>Bounty Search Engine</h1>
        <p class="animated-text">Dig into repositories...</p>
        <p>Be cautious, knowledge is power!</p>
    </div>

    <!-- GitHub Dorks Section -->
    <div class="dorks-container">
        <h2>GitHub Dorks for Bug Bounty</h2>
        <p>
            <a href="https://github.com/Vulnpire/bounty-search-engine" target="_blank">GitHub Repo</a><br><br>
        </p>
        <input type="text" id="domainInput" class="search-input" placeholder="Enter a domain...">
        <button id="updateDomainButton" class="search-button">Update Domain</button>
        <ul id="dorkList"></ul>
    </div>

    <!-- Paging Links -->
    <div class="paging">
        <a href="index.html">Google Dorks</a>
        <a href="shodan.html">Shodan Dorks</a>
    </div>

    <!-- Footer -->
    <div class="footer">
        &copy; 2024 Bounty Search Engine | Stay Anonymous
    </div>

    <script>
        // Functionality for GitHub Dorks section
    let originalDorks = [];

    // Fetch dorks from the GitHub repository
    async function fetchDorks() {
        const url = "https://raw.githubusercontent.com/Vulnpire/bounty-search-engine/main/dorks/git-dorks.md";
        const response = await fetch(url);
        const text = await response.text();

        const dorkList = document.getElementById("dorkList");
        const regex = /(?:^### (.+)|^> (.+))/gm;
        let match;
        let title = '';
        let firstDork = true;

        while ((match = regex.exec(text)) !== null) {
            if (match[1]) {
                // Title match
                title = match[1];
            } else {
                // Dork match
                if (firstDork) {
                    firstDork = false;
                    continue;
                }
                const dork = match[2];
                originalDorks.push(dork);
                const listItem = createDorkListItem(dork, title);
                dorkList.appendChild(listItem);
            }
        }
    }

    let prevTitle = '';

    // Create a list item for each dork
    function createDorkListItem(dork, description) {
        const githubLink = `https://github.com/search?q=${encodeURIComponent(dork + ' password')}&type=Code`;

        const listItem = document.createElement("li");

        if (description && description !== prevTitle) {
            const desc = document.createElement("p");
            desc.textContent = description;
            desc.classList.add("description");
            listItem.appendChild(desc);
            prevTitle = description;
        }

        const link = document.createElement("a");
        link.href = githubLink;
        link.textContent = dork;
        link.classList.add("dorkLink");
        link.target = "_blank";
        link.addEventListener("click", () => {
            link.classList.add("clicked");
        });

        listItem.appendChild(link);

        return listItem;
    }

    // Update the domain in the dorks
    function updateDomain() {
        const domainInput = document.getElementById("domainInput");
        const domain = domainInput.value.trim();

        if (!domain) return;

        const dorkLinks = document.querySelectorAll(".dorkLink");
        dorkLinks.forEach((link, index) => {
            let originalDork = originalDorks[index];

            // Replace 'example.com' in the dork
            const updatedDork = originalDork.replace(/example\.com/gi, domain);

            // Update the link and the displayed text
            const updatedLink = `https://github.com/search?q=${encodeURIComponent(updatedDork + ' password')}&type=Code`;

            link.textContent = updatedDork;
            link.href = updatedLink;
            link.classList.remove("clicked"); // Reset the color
        });
    }

    // Attach event listeners to the update button and input field
    const updateDomainButton = document.getElementById("updateDomainButton");
    updateDomainButton.addEventListener("click", updateDomain);

    const domainInput = document.getElementById("domainInput");
    domainInput.addEventListener("keypress", (event) => {
        if (event.key === "Enter") {
            updateDomain();
        }
    });

    // Fetch and display dorks initially
    fetchDorks();
</script>
